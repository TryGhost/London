{"version":3,"file":"swup.js","sources":["swup.js"],"sourcesContent":["/** Swup scripts plugin */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SwupScriptsPlugin\"] = factory();\n\telse\n\t\troot[\"SwupScriptsPlugin\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(1);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = _index2.default; // this is here for webpack to expose SwupPlugin as window.SwupPlugin\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _plugin = __webpack_require__(2);\n\nvar _plugin2 = _interopRequireDefault(_plugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar arrayify = function arrayify(list) {\n\treturn Array.prototype.slice.call(list);\n};\n\nvar ScriptsPlugin = function (_Plugin) {\n\t_inherits(ScriptsPlugin, _Plugin);\n\n\tfunction ScriptsPlugin(options) {\n\t\t_classCallCheck(this, ScriptsPlugin);\n\n\t\tvar _this = _possibleConstructorReturn(this, (ScriptsPlugin.__proto__ || Object.getPrototypeOf(ScriptsPlugin)).call(this));\n\n\t\t_this.name = 'ScriptsPlugin';\n\n\t\t_this.runScripts = function () {\n\t\t\tvar scope = _this.options.head && _this.options.body ? document : _this.options.head ? document.head : document.body;\n\n\t\t\tvar scripts = arrayify(scope.querySelectorAll('script:not([data-swup-ignore-script])'));\n\n\t\t\tscripts.forEach(function (script) {\n\t\t\t\treturn _this.runScript(script);\n\t\t\t});\n\n\t\t\t_this.swup.log('Executed ' + scripts.length + ' scripts.');\n\t\t};\n\n\t\t_this.runScript = function (originalElement) {\n\t\t\tvar element = document.createElement('script');\n\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = arrayify(originalElement.attributes)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar _ref2 = _step.value;\n\t\t\t\t\tvar name = _ref2.name,\n\t\t\t\t\t    value = _ref2.value;\n\n\t\t\t\t\telement.setAttribute(name, value);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telement.textContent = originalElement.textContent;\n\t\t\telement.setAttribute('async', 'false');\n\n\t\t\toriginalElement.replaceWith(element);\n\t\t\treturn element;\n\t\t};\n\n\t\tvar defaultOptions = {\n\t\t\thead: true,\n\t\t\tbody: true\n\t\t};\n\n\t\t_this.options = _extends({}, defaultOptions, options);\n\t\treturn _this;\n\t}\n\n\t_createClass(ScriptsPlugin, [{\n\t\tkey: 'mount',\n\t\tvalue: function mount() {\n\t\t\tthis.swup.on('contentReplaced', this.runScripts);\n\t\t}\n\t}, {\n\t\tkey: 'unmount',\n\t\tvalue: function unmount() {\n\t\t\tthis.swup.off('contentReplaced', this.runScripts);\n\t\t}\n\t}]);\n\n\treturn ScriptsPlugin;\n}(_plugin2.default);\n\nexports.default = ScriptsPlugin;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Plugin = function () {\n    function Plugin() {\n        _classCallCheck(this, Plugin);\n\n        this.isSwupPlugin = true;\n    }\n\n    _createClass(Plugin, [{\n        key: \"mount\",\n        value: function mount() {\n            // this is mount method rewritten by class extending\n            // and is executed when swup is enabled with plugin\n        }\n    }, {\n        key: \"unmount\",\n        value: function unmount() {\n            // this is unmount method rewritten by class extending\n            // and is executed when swup with plugin is disabled\n        }\n    }, {\n        key: \"_beforeMount\",\n        value: function _beforeMount() {\n            // here for any future hidden auto init\n        }\n    }, {\n        key: \"_afterUnmount\",\n        value: function _afterUnmount() {}\n        // here for any future hidden auto-cleanup\n\n\n        // this is here so we can tell if plugin was created by extending this class\n\n    }]);\n\n    return Plugin;\n}();\n\nexports.default = Plugin;\n\n/***/ })\n/******/ ]);\n});\n\n/** Swup Head plugin */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SwupHeadPlugin\"] = factory();\n\telse\n\t\troot[\"SwupHeadPlugin\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(1);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = _index2.default; // this is here for webpack to expose SwupPlugin as window.SwupPlugin\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _plugin = __webpack_require__(2);\n\nvar _plugin2 = _interopRequireDefault(_plugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar HeadPlugin = function (_Plugin) {\n\t_inherits(HeadPlugin, _Plugin);\n\n\tfunction HeadPlugin() {\n\t\tvar _ref;\n\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, HeadPlugin);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = HeadPlugin.__proto__ || Object.getPrototypeOf(HeadPlugin)).call.apply(_ref, [this].concat(args))), _this), _this.name = 'HeadPlugin', _this.getHeadAndReplace = function () {\n\t\t\tvar headChildren = _this.getHeadChildren();\n\t\t\tvar nextHeadChildren = _this.getNextHeadChildren();\n\n\t\t\t_this.replaceTags(headChildren, nextHeadChildren);\n\t\t}, _this.getHeadChildren = function () {\n\t\t\treturn document.head.children;\n\t\t}, _this.getNextHeadChildren = function () {\n\t\t\tvar pageContent = _this.swup.cache.getCurrentPage().originalContent.replace('<head', '<div id=\"swupHead\"').replace('</head>', '</div>');\n\t\t\tvar element = document.createElement('div');\n\t\t\telement.innerHTML = pageContent;\n\t\t\tvar children = element.querySelector('#swupHead').children;\n\n\t\t\t// cleanup\n\t\t\telement.innerHTML = '';\n\t\t\telement = null;\n\n\t\t\treturn children;\n\t\t}, _this.replaceTags = function (oldTags, newTags) {\n\t\t\tvar head = document.head;\n\t\t\tvar themeActive = Boolean(document.querySelector('[data-swup-theme]'));\n\t\t\tvar addTags = _this.getTagsToAdd(oldTags, newTags, themeActive);\n\t\t\tvar removeTags = _this.getTagsToRemove(oldTags, newTags, themeActive);\n\n\t\t\tremoveTags.reverse().forEach(function (item) {\n\t\t\t\thead.removeChild(item.tag);\n\t\t\t});\n\n\t\t\taddTags.forEach(function (item) {\n\t\t\t\thead.insertBefore(item.tag, head.children[item.index]);\n\t\t\t});\n\n\t\t\t_this.swup.log('Removed ' + removeTags.length + ' / added ' + addTags.length + ' tags in head');\n\t\t}, _this.compareTags = function (oldTag, newTag) {\n\t\t\tvar oldTagContent = oldTag.outerHTML;\n\t\t\tvar newTagContent = newTag.outerHTML;\n\n\t\t\treturn oldTagContent === newTagContent;\n\t\t}, _this.getTagsToRemove = function (oldTags, newTags) {\n\t\t\tvar removeTags = [];\n\n\t\t\tfor (var i = 0; i < oldTags.length; i++) {\n\t\t\t\tvar foundAt = null;\n\n\t\t\t\tfor (var j = 0; j < newTags.length; j++) {\n\t\t\t\t\tif (_this.compareTags(oldTags[i], newTags[j])) {\n\t\t\t\t\t\tfoundAt = j;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (foundAt == null && oldTags[i].getAttribute('data-swup-theme') === null) {\n\t\t\t\t\tremoveTags.push({ tag: oldTags[i] });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn removeTags;\n\t\t}, _this.getTagsToAdd = function (oldTags, newTags, themeActive) {\n\t\t\tvar addTags = [];\n\n\t\t\tfor (var i = 0; i < newTags.length; i++) {\n\t\t\t\tvar foundAt = null;\n\n\t\t\t\tfor (var j = 0; j < oldTags.length; j++) {\n\t\t\t\t\tif (_this.compareTags(oldTags[j], newTags[i])) {\n\t\t\t\t\t\tfoundAt = j;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (foundAt == null) {\n\t\t\t\t\taddTags.push({ index: themeActive ? i + 1 : i, tag: newTags[i] });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn addTags;\n\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\t_createClass(HeadPlugin, [{\n\t\tkey: 'mount',\n\t\tvalue: function mount() {\n\t\t\tthis.swup.on('contentReplaced', this.getHeadAndReplace);\n\t\t}\n\t}, {\n\t\tkey: 'unmount',\n\t\tvalue: function unmount() {\n\t\t\tthis.swup.off('contentReplaced', this.getHeadAndReplace);\n\t\t}\n\t}]);\n\n\treturn HeadPlugin;\n}(_plugin2.default);\n\nexports.default = HeadPlugin;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Plugin = function () {\n    function Plugin() {\n        _classCallCheck(this, Plugin);\n\n        this.isSwupPlugin = true;\n    }\n\n    _createClass(Plugin, [{\n        key: \"mount\",\n        value: function mount() {\n            // this is mount method rewritten by class extending\n            // and is executed when swup is enabled with plugin\n        }\n    }, {\n        key: \"unmount\",\n        value: function unmount() {\n            // this is unmount method rewritten by class extending\n            // and is executed when swup with plugin is disabled\n        }\n    }, {\n        key: \"_beforeMount\",\n        value: function _beforeMount() {\n            // here for any future hidden auto init\n        }\n    }, {\n        key: \"_afterUnmount\",\n        value: function _afterUnmount() {}\n        // here for any future hidden auto-cleanup\n\n\n        // this is here so we can tell if plugin was created by extending this class\n\n    }]);\n\n    return Plugin;\n}();\n\nexports.default = Plugin;\n\n/***/ })\n/******/ ]);\n});\n\n/** Swup.js */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Swup\"] = factory();\n\telse\n\t\troot[\"Swup\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Link = exports.markSwupElements = exports.getCurrentUrl = exports.transitionEnd = exports.fetch = exports.getDataFromHtml = exports.createHistoryRecord = exports.classify = undefined;\n\nvar _classify = __webpack_require__(8);\n\nvar _classify2 = _interopRequireDefault(_classify);\n\nvar _createHistoryRecord = __webpack_require__(9);\n\nvar _createHistoryRecord2 = _interopRequireDefault(_createHistoryRecord);\n\nvar _getDataFromHtml = __webpack_require__(10);\n\nvar _getDataFromHtml2 = _interopRequireDefault(_getDataFromHtml);\n\nvar _fetch = __webpack_require__(11);\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _transitionEnd = __webpack_require__(12);\n\nvar _transitionEnd2 = _interopRequireDefault(_transitionEnd);\n\nvar _getCurrentUrl = __webpack_require__(13);\n\nvar _getCurrentUrl2 = _interopRequireDefault(_getCurrentUrl);\n\nvar _markSwupElements = __webpack_require__(14);\n\nvar _markSwupElements2 = _interopRequireDefault(_markSwupElements);\n\nvar _Link = __webpack_require__(15);\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar classify = exports.classify = _classify2.default;\nvar createHistoryRecord = exports.createHistoryRecord = _createHistoryRecord2.default;\nvar getDataFromHtml = exports.getDataFromHtml = _getDataFromHtml2.default;\nvar fetch = exports.fetch = _fetch2.default;\nvar transitionEnd = exports.transitionEnd = _transitionEnd2.default;\nvar getCurrentUrl = exports.getCurrentUrl = _getCurrentUrl2.default;\nvar markSwupElements = exports.markSwupElements = _markSwupElements2.default;\nvar Link = exports.Link = _Link2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar query = exports.query = function query(selector) {\n\tvar context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\tif (typeof selector !== 'string') {\n\t\treturn selector;\n\t}\n\n\treturn context.querySelector(selector);\n};\n\nvar queryAll = exports.queryAll = function queryAll(selector) {\n\tvar context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\tif (typeof selector !== 'string') {\n\t\treturn selector;\n\t}\n\n\treturn Array.prototype.slice.call(context.querySelectorAll(selector));\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(3);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = _index2.default; // this is here for webpack to expose Swup as window.Swup\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// modules\n\n\nvar _delegate = __webpack_require__(4);\n\nvar _delegate2 = _interopRequireDefault(_delegate);\n\nvar _Cache = __webpack_require__(6);\n\nvar _Cache2 = _interopRequireDefault(_Cache);\n\nvar _loadPage = __webpack_require__(7);\n\nvar _loadPage2 = _interopRequireDefault(_loadPage);\n\nvar _renderPage = __webpack_require__(16);\n\nvar _renderPage2 = _interopRequireDefault(_renderPage);\n\nvar _triggerEvent = __webpack_require__(17);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _on = __webpack_require__(18);\n\nvar _on2 = _interopRequireDefault(_on);\n\nvar _off = __webpack_require__(19);\n\nvar _off2 = _interopRequireDefault(_off);\n\nvar _updateTransition = __webpack_require__(20);\n\nvar _updateTransition2 = _interopRequireDefault(_updateTransition);\n\nvar _getAnimationPromises = __webpack_require__(21);\n\nvar _getAnimationPromises2 = _interopRequireDefault(_getAnimationPromises);\n\nvar _getPageData = __webpack_require__(22);\n\nvar _getPageData2 = _interopRequireDefault(_getPageData);\n\nvar _plugins = __webpack_require__(23);\n\nvar _utils = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Swup = function () {\n\tfunction Swup(setOptions) {\n\t\t_classCallCheck(this, Swup);\n\n\t\t// default options\n\t\tvar defaults = {\n\t\t\tanimateHistoryBrowsing: false,\n\t\t\tanimationSelector: '[class*=\"transition-\"]',\n\t\t\tlinkSelector: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n\t\t\tcache: true,\n\t\t\tcontainers: ['#swup'],\n\t\t\trequestHeaders: {\n\t\t\t\t'X-Requested-With': 'swup',\n\t\t\t\tAccept: 'text/html, application/xhtml+xml'\n\t\t\t},\n\t\t\tplugins: [],\n\t\t\tskipPopStateHandling: function skipPopStateHandling(event) {\n\t\t\t\treturn !(event.state && event.state.source === 'swup');\n\t\t\t}\n\t\t};\n\n\t\t// merge options\n\t\tvar options = _extends({}, defaults, setOptions);\n\n\t\t// handler arrays\n\t\tthis._handlers = {\n\t\t\tanimationInDone: [],\n\t\t\tanimationInStart: [],\n\t\t\tanimationOutDone: [],\n\t\t\tanimationOutStart: [],\n\t\t\tanimationSkipped: [],\n\t\t\tclickLink: [],\n\t\t\tcontentReplaced: [],\n\t\t\tdisabled: [],\n\t\t\tenabled: [],\n\t\t\topenPageInNewTab: [],\n\t\t\tpageLoaded: [],\n\t\t\tpageRetrievedFromCache: [],\n\t\t\tpageView: [],\n\t\t\tpopState: [],\n\t\t\tsamePage: [],\n\t\t\tsamePageWithHash: [],\n\t\t\tserverError: [],\n\t\t\ttransitionStart: [],\n\t\t\ttransitionEnd: [],\n\t\t\twillReplaceContent: []\n\t\t};\n\n\t\t// variable for id of element to scroll to after render\n\t\tthis.scrollToElement = null;\n\t\t// variable for promise used for preload, so no new loading of the same page starts while page is loading\n\t\tthis.preloadPromise = null;\n\t\t// variable for save options\n\t\tthis.options = options;\n\t\t// variable for plugins array\n\t\tthis.plugins = [];\n\t\t// variable for current transition object\n\t\tthis.transition = {};\n\t\t// variable for keeping event listeners from \"delegate\"\n\t\tthis.delegatedListeners = {};\n\n\t\t// make modules accessible in instance\n\t\tthis.cache = new _Cache2.default();\n\t\tthis.cache.swup = this;\n\t\tthis.loadPage = _loadPage2.default;\n\t\tthis.renderPage = _renderPage2.default;\n\t\tthis.triggerEvent = _triggerEvent2.default;\n\t\tthis.on = _on2.default;\n\t\tthis.off = _off2.default;\n\t\tthis.updateTransition = _updateTransition2.default;\n\t\tthis.getAnimationPromises = _getAnimationPromises2.default;\n\t\tthis.getPageData = _getPageData2.default;\n\t\tthis.log = function () {}; // here so it can be used by plugins\n\t\tthis.use = _plugins.use;\n\t\tthis.unuse = _plugins.unuse;\n\t\tthis.findPlugin = _plugins.findPlugin;\n\n\t\t// enable swup\n\t\tthis.enable();\n\t}\n\n\t_createClass(Swup, [{\n\t\tkey: 'enable',\n\t\tvalue: function enable() {\n\t\t\tvar _this = this;\n\n\t\t\t// check for Promise support\n\t\t\tif (typeof Promise === 'undefined') {\n\t\t\t\tconsole.warn('Promise is not supported');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// add event listeners\n\t\t\tthis.delegatedListeners.click = (0, _delegate2.default)(document, this.options.linkSelector, 'click', this.linkClickHandler.bind(this));\n\t\t\twindow.addEventListener('popstate', this.popStateHandler.bind(this));\n\n\t\t\t// initial save to cache\n\t\t\tvar page = (0, _helpers.getDataFromHtml)(document.documentElement.outerHTML, this.options.containers);\n\t\t\tpage.url = page.responseURL = (0, _helpers.getCurrentUrl)();\n\t\t\tif (this.options.cache) {\n\t\t\t\tthis.cache.cacheUrl(page);\n\t\t\t}\n\n\t\t\t// mark swup blocks in html\n\t\t\t(0, _helpers.markSwupElements)(document.documentElement, this.options.containers);\n\n\t\t\t// mount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this.use(plugin);\n\t\t\t});\n\n\t\t\t// modify initial history record\n\t\t\twindow.history.replaceState(Object.assign({}, window.history.state, {\n\t\t\t\turl: window.location.href,\n\t\t\t\trandom: Math.random(),\n\t\t\t\tsource: 'swup'\n\t\t\t}), document.title, window.location.href);\n\n\t\t\t// trigger enabled event\n\t\t\tthis.triggerEvent('enabled');\n\n\t\t\t// add swup-enabled class to html tag\n\t\t\tdocument.documentElement.classList.add('swup-enabled');\n\n\t\t\t// trigger page view event\n\t\t\tthis.triggerEvent('pageView');\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\t// remove delegated listeners\n\t\t\tthis.delegatedListeners.click.destroy();\n\t\t\tthis.delegatedListeners.mouseover.destroy();\n\n\t\t\t// remove popstate listener\n\t\t\twindow.removeEventListener('popstate', this.popStateHandler.bind(this));\n\n\t\t\t// empty cache\n\t\t\tthis.cache.empty();\n\n\t\t\t// unmount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this2.unuse(plugin);\n\t\t\t});\n\n\t\t\t// remove swup data atributes from blocks\n\t\t\t(0, _utils.queryAll)('[data-swup]').forEach(function (element) {\n\t\t\t\telement.removeAttribute('data-swup');\n\t\t\t});\n\n\t\t\t// remove handlers\n\t\t\tthis.off();\n\n\t\t\t// trigger disable event\n\t\t\tthis.triggerEvent('disabled');\n\n\t\t\t// remove swup-enabled class from html tag\n\t\t\tdocument.documentElement.classList.remove('swup-enabled');\n\t\t}\n\t}, {\n\t\tkey: 'linkClickHandler',\n\t\tvalue: function linkClickHandler(event) {\n\t\t\t// no control key pressed\n\t\t\tif (!event.metaKey && !event.ctrlKey && !event.shiftKey && !event.altKey) {\n\t\t\t\t// index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n\t\t\t\tif (event.button === 0) {\n\t\t\t\t\tthis.triggerEvent('clickLink', event);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tvar link = new _helpers.Link(event.delegateTarget);\n\t\t\t\t\tif (link.getAddress() == (0, _helpers.getCurrentUrl)() || link.getAddress() == '') {\n\t\t\t\t\t\t// link to the same URL\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\t// link to the same URL with hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePageWithHash', event);\n\t\t\t\t\t\t\tvar element = document.querySelector(link.getHash());\n\t\t\t\t\t\t\tif (element != null) {\n\t\t\t\t\t\t\t\thistory.replaceState({\n\t\t\t\t\t\t\t\t\turl: link.getAddress() + link.getHash(),\n\t\t\t\t\t\t\t\t\trandom: Math.random(),\n\t\t\t\t\t\t\t\t\tsource: 'swup'\n\t\t\t\t\t\t\t\t}, document.title, link.getAddress() + link.getHash());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// referenced element not found\n\t\t\t\t\t\t\t\tconsole.warn('Element for offset not found (' + link.getHash() + ')');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// link to the same URL without hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePage', event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// link to different url\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// get custom transition from data\n\t\t\t\t\t\tvar customTransition = event.delegateTarget.getAttribute('data-swup-transition');\n\n\t\t\t\t\t\t// load page\n\t\t\t\t\t\tthis.loadPage({ url: link.getAddress(), customTransition: customTransition }, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// open in new tab (do nothing)\n\t\t\t\tthis.triggerEvent('openPageInNewTab', event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'popStateHandler',\n\t\tvalue: function popStateHandler(event) {\n\t\t\tif (this.options.skipPopStateHandling(event)) return;\n\t\t\tvar link = new _helpers.Link(event.state ? event.state.url : window.location.pathname);\n\t\t\tif (link.getHash() !== '') {\n\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tthis.triggerEvent('popState', event);\n\t\t\tthis.loadPage({ url: link.getAddress() }, event);\n\t\t}\n\t}]);\n\n\treturn Swup;\n}();\n\nexports.default = Swup;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar closest = __webpack_require__(5);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cache = exports.Cache = function () {\n\tfunction Cache() {\n\t\t_classCallCheck(this, Cache);\n\n\t\tthis.pages = {};\n\t\tthis.last = null;\n\t}\n\n\t_createClass(Cache, [{\n\t\tkey: 'cacheUrl',\n\t\tvalue: function cacheUrl(page) {\n\t\t\tif (page.url in this.pages === false) {\n\t\t\t\tthis.pages[page.url] = page;\n\t\t\t}\n\t\t\tthis.last = this.pages[page.url];\n\t\t\tthis.swup.log('Cache (' + Object.keys(this.pages).length + ')', this.pages);\n\t\t}\n\t}, {\n\t\tkey: 'getPage',\n\t\tvalue: function getPage(url) {\n\t\t\treturn this.pages[url];\n\t\t}\n\t}, {\n\t\tkey: 'getCurrentPage',\n\t\tvalue: function getCurrentPage() {\n\t\t\treturn this.getPage(window.location.pathname + window.location.search);\n\t\t}\n\t}, {\n\t\tkey: 'exists',\n\t\tvalue: function exists(url) {\n\t\t\treturn url in this.pages;\n\t\t}\n\t}, {\n\t\tkey: 'empty',\n\t\tvalue: function empty() {\n\t\t\tthis.pages = {};\n\t\t\tthis.last = null;\n\t\t\tthis.swup.log('Cache cleared');\n\t\t}\n\t}, {\n\t\tkey: 'remove',\n\t\tvalue: function remove(url) {\n\t\t\tdelete this.pages[url];\n\t\t}\n\t}]);\n\n\treturn Cache;\n}();\n\nexports.default = Cache;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _helpers = __webpack_require__(0);\n\nvar loadPage = function loadPage(data, popstate) {\n\tvar _this = this;\n\n\t// create array for storing animation promises\n\tvar animationPromises = [],\n\t    xhrPromise = void 0;\n\tvar animateOut = function animateOut() {\n\t\t_this.triggerEvent('animationOutStart');\n\n\t\t// handle classes\n\t\tdocument.documentElement.classList.add('is-changing');\n\t\tdocument.documentElement.classList.add('is-leaving');\n\t\tdocument.documentElement.classList.add('is-animating');\n\t\tif (popstate) {\n\t\t\tdocument.documentElement.classList.add('is-popstate');\n\t\t}\n\t\tdocument.documentElement.classList.add('to-' + (0, _helpers.classify)(data.url));\n\n\t\t// animation promise stuff\n\t\tanimationPromises = _this.getAnimationPromises('out');\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationOutDone');\n\t\t});\n\n\t\t// create history record if this is not a popstate call\n\t\tif (!popstate) {\n\t\t\t// create pop element with or without anchor\n\t\t\tvar state = void 0;\n\t\t\tif (_this.scrollToElement != null) {\n\t\t\t\tstate = data.url + _this.scrollToElement;\n\t\t\t} else {\n\t\t\t\tstate = data.url;\n\t\t\t}\n\n\t\t\t(0, _helpers.createHistoryRecord)(state);\n\t\t}\n\t};\n\n\tthis.triggerEvent('transitionStart', popstate);\n\n\t// set transition object\n\tif (data.customTransition != null) {\n\t\tthis.updateTransition(window.location.pathname, data.url, data.customTransition);\n\t\tdocument.documentElement.classList.add('to-' + (0, _helpers.classify)(data.customTransition));\n\t} else {\n\t\tthis.updateTransition(window.location.pathname, data.url);\n\t}\n\n\t// start/skip animation\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tanimateOut();\n\t} else {\n\t\tthis.triggerEvent('animationSkipped');\n\t}\n\n\t// start/skip loading of page\n\tif (this.cache.exists(data.url)) {\n\t\txhrPromise = new Promise(function (resolve) {\n\t\t\tresolve();\n\t\t});\n\t\tthis.triggerEvent('pageRetrievedFromCache');\n\t} else {\n\t\tif (!this.preloadPromise || this.preloadPromise.route != data.url) {\n\t\t\txhrPromise = new Promise(function (resolve, reject) {\n\t\t\t\t(0, _helpers.fetch)(_extends({}, data, { headers: _this.options.requestHeaders }), function (response) {\n\t\t\t\t\tif (response.status === 500) {\n\t\t\t\t\t\t_this.triggerEvent('serverError');\n\t\t\t\t\t\treject(data.url);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// get json data\n\t\t\t\t\t\tvar page = _this.getPageData(response);\n\t\t\t\t\t\tif (page != null) {\n\t\t\t\t\t\t\tpage.url = data.url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(data.url);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// render page\n\t\t\t\t\t\t_this.cache.cacheUrl(page);\n\t\t\t\t\t\t_this.triggerEvent('pageLoaded');\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\txhrPromise = this.preloadPromise;\n\t\t}\n\t}\n\n\t// when everything is ready, handle the outcome\n\tPromise.all(animationPromises.concat([xhrPromise])).then(function () {\n\t\t// render page\n\t\t_this.renderPage(_this.cache.getPage(data.url), popstate);\n\t\t_this.preloadPromise = null;\n\t}).catch(function (errorUrl) {\n\t\t// rewrite the skipPopStateHandling function to redirect manually when the history.go is processed\n\t\t_this.options.skipPopStateHandling = function () {\n\t\t\twindow.location = errorUrl;\n\t\t\treturn true;\n\t\t};\n\n\t\t// go back to the actual page were still at\n\t\twindow.history.go(-1);\n\t});\n};\n\nexports.default = loadPage;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar classify = function classify(text) {\n\tvar output = text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n\t.replace(/\\//g, '-') // Replace / with -\n\t.replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n\t.replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n\t.replace(/^-+/, '') // Trim - from start of text\n\t.replace(/-+$/, ''); // Trim - from end of text\n\tif (output[0] === '/') output = output.splice(1);\n\tif (output === '') output = 'homepage';\n\treturn output;\n};\n\nexports.default = classify;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar createHistoryRecord = function createHistoryRecord(url) {\n\twindow.history.pushState({\n\t\turl: url || window.location.href.split(window.location.hostname)[1],\n\t\trandom: Math.random(),\n\t\tsource: 'swup'\n\t}, document.getElementsByTagName('title')[0].innerText, url || window.location.href.split(window.location.hostname)[1]);\n};\n\nexports.default = createHistoryRecord;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _utils = __webpack_require__(1);\n\nvar getDataFromHtml = function getDataFromHtml(html, containers) {\n\tvar content = html.replace('<body', '<div id=\"swupBody\"').replace('</body>', '</div>');\n\tvar fakeDom = document.createElement('div');\n\tfakeDom.innerHTML = content;\n\tvar blocks = [];\n\n\tvar _loop = function _loop(i) {\n\t\tif (fakeDom.querySelector(containers[i]) == null) {\n\t\t\t// page in invalid\n\t\t\treturn {\n\t\t\t\tv: null\n\t\t\t};\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], fakeDom)[index].setAttribute('data-swup', blocks.length); // marks element with data-swup\n\t\t\t\tblocks.push((0, _utils.queryAll)(containers[i], fakeDom)[index].outerHTML);\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\tvar _ret = _loop(i);\n\n\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t}\n\n\tvar json = {\n\t\ttitle: fakeDom.querySelector('title').innerText,\n\t\tpageClass: fakeDom.querySelector('#swupBody').className,\n\t\toriginalContent: html,\n\t\tblocks: blocks\n\t};\n\n\t// to prevent memory leaks\n\tfakeDom.innerHTML = '';\n\tfakeDom = null;\n\n\treturn json;\n};\n\nexports.default = getDataFromHtml;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar fetch = function fetch(setOptions) {\n\tvar callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\tvar defaults = {\n\t\turl: window.location.pathname + window.location.search,\n\t\tmethod: 'GET',\n\t\tdata: null,\n\t\theaders: {}\n\t};\n\n\tvar options = _extends({}, defaults, setOptions);\n\n\tvar request = new XMLHttpRequest();\n\n\trequest.onreadystatechange = function () {\n\t\tif (request.readyState === 4) {\n\t\t\tif (request.status !== 500) {\n\t\t\t\tcallback(request);\n\t\t\t} else {\n\t\t\t\tcallback(request);\n\t\t\t}\n\t\t}\n\t};\n\n\trequest.open(options.method, options.url, true);\n\tObject.keys(options.headers).forEach(function (key) {\n\t\trequest.setRequestHeader(key, options.headers[key]);\n\t});\n\trequest.send(options.data);\n\treturn request;\n};\n\nexports.default = fetch;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar transitionEnd = function transitionEnd() {\n\tvar el = document.createElement('div');\n\n\tvar transEndEventNames = {\n\t\tWebkitTransition: 'webkitTransitionEnd',\n\t\tMozTransition: 'transitionend',\n\t\tOTransition: 'oTransitionEnd otransitionend',\n\t\ttransition: 'transitionend'\n\t};\n\n\tfor (var name in transEndEventNames) {\n\t\tif (el.style[name] !== undefined) {\n\t\t\treturn transEndEventNames[name];\n\t\t}\n\t}\n\n\treturn false;\n};\n\nexports.default = transitionEnd;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar getCurrentUrl = function getCurrentUrl() {\n\treturn window.location.pathname + window.location.search;\n};\n\nexports.default = getCurrentUrl;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _utils = __webpack_require__(1);\n\nvar markSwupElements = function markSwupElements(element, containers) {\n\tvar blocks = 0;\n\n\tvar _loop = function _loop(i) {\n\t\tif (element.querySelector(containers[i]) == null) {\n\t\t\tconsole.warn('Element ' + containers[i] + ' is not in current page.');\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], element)[index].setAttribute('data-swup', blocks);\n\t\t\t\tblocks++;\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\t_loop(i);\n\t}\n};\n\nexports.default = markSwupElements;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Link = function () {\n\tfunction Link(elementOrUrl) {\n\t\t_classCallCheck(this, Link);\n\n\t\tif (elementOrUrl instanceof Element || elementOrUrl instanceof SVGElement) {\n\t\t\tthis.link = elementOrUrl;\n\t\t} else {\n\t\t\tthis.link = document.createElement('a');\n\t\t\tthis.link.href = elementOrUrl;\n\t\t}\n\t}\n\n\t_createClass(Link, [{\n\t\tkey: 'getPath',\n\t\tvalue: function getPath() {\n\t\t\tvar path = this.link.pathname;\n\t\t\tif (path[0] !== '/') {\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\t}, {\n\t\tkey: 'getAddress',\n\t\tvalue: function getAddress() {\n\t\t\tvar path = this.link.pathname + this.link.search;\n\n\t\t\tif (this.link.getAttribute('xlink:href')) {\n\t\t\t\tpath = this.link.getAttribute('xlink:href');\n\t\t\t}\n\n\t\t\tif (path[0] !== '/') {\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\t}, {\n\t\tkey: 'getHash',\n\t\tvalue: function getHash() {\n\t\t\treturn this.link.hash;\n\t\t}\n\t}]);\n\n\treturn Link;\n}();\n\nexports.default = Link;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(0);\n\nvar renderPage = function renderPage(page, popstate) {\n\tvar _this = this;\n\n\tdocument.documentElement.classList.remove('is-leaving');\n\n\t// replace state in case the url was redirected\n\tvar link = new _helpers.Link(page.responseURL);\n\tif (window.location.pathname !== link.getPath()) {\n\t\twindow.history.replaceState({\n\t\t\turl: link.getPath(),\n\t\t\trandom: Math.random(),\n\t\t\tsource: 'swup'\n\t\t}, document.title, link.getPath());\n\n\t\t// save new record for redirected url\n\t\tthis.cache.cacheUrl(_extends({}, page, { url: link.getPath() }));\n\t}\n\n\t// only add for non-popstate transitions\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tdocument.documentElement.classList.add('is-rendering');\n\t}\n\n\tthis.triggerEvent('willReplaceContent', popstate);\n\n\t// replace blocks\n\tfor (var i = 0; i < page.blocks.length; i++) {\n\t\tdocument.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n\t}\n\n\t// set title\n\tdocument.title = page.title;\n\n\tthis.triggerEvent('contentReplaced', popstate);\n\tthis.triggerEvent('pageView', popstate);\n\n\t// empty cache if it's disabled (because pages could be preloaded and stuff)\n\tif (!this.options.cache) {\n\t\tthis.cache.empty();\n\t}\n\n\t// start animation IN\n\tsetTimeout(function () {\n\t\tif (!popstate || _this.options.animateHistoryBrowsing) {\n\t\t\t_this.triggerEvent('animationInStart');\n\t\t\tdocument.documentElement.classList.remove('is-animating');\n\t\t}\n\t}, 10);\n\n\t// handle end of animation\n\tvar animationPromises = this.getAnimationPromises('in');\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationInDone');\n\t\t\t_this.triggerEvent('transitionEnd', popstate);\n\t\t\t// remove \"to-{page}\" classes\n\t\t\tdocument.documentElement.className.split(' ').forEach(function (classItem) {\n\t\t\t\tif (new RegExp('^to-').test(classItem) || classItem === 'is-changing' || classItem === 'is-rendering' || classItem === 'is-popstate') {\n\t\t\t\t\tdocument.documentElement.classList.remove(classItem);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tthis.triggerEvent('transitionEnd', popstate);\n\t}\n\n\t// reset scroll-to element\n\tthis.scrollToElement = null;\n};\n\nexports.default = renderPage;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar triggerEvent = function triggerEvent(eventName, originalEvent) {\n\t// call saved handlers with \"on\" method and pass originalEvent object if available\n\tthis._handlers[eventName].forEach(function (handler) {\n\t\ttry {\n\t\t\thandler(originalEvent);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t});\n\n\t// trigger event on document with prefix \"swup:\"\n\tvar event = new CustomEvent('swup:' + eventName, { detail: eventName });\n\tdocument.dispatchEvent(event);\n};\n\nexports.default = triggerEvent;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar on = function on(event, handler) {\n\tif (this._handlers[event]) {\n\t\tthis._handlers[event].push(handler);\n\t} else {\n\t\tconsole.warn(\"Unsupported event \" + event + \".\");\n\t}\n};\n\nexports.default = on;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar off = function off(event, handler) {\n\tvar _this = this;\n\n\tif (event != null) {\n\t\tif (handler != null) {\n\t\t\tif (this._handlers[event] && this._handlers[event].filter(function (savedHandler) {\n\t\t\t\treturn savedHandler === handler;\n\t\t\t}).length) {\n\t\t\t\tvar toRemove = this._handlers[event].filter(function (savedHandler) {\n\t\t\t\t\treturn savedHandler === handler;\n\t\t\t\t})[0];\n\t\t\t\tvar index = this._handlers[event].indexOf(toRemove);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis._handlers[event].splice(index, 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Handler for event '\" + event + \"' no found.\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis._handlers[event] = [];\n\t\t}\n\t} else {\n\t\tObject.keys(this._handlers).forEach(function (keys) {\n\t\t\t_this._handlers[keys] = [];\n\t\t});\n\t}\n};\n\nexports.default = off;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar updateTransition = function updateTransition(from, to, custom) {\n\t// transition routes\n\tthis.transition = {\n\t\tfrom: from,\n\t\tto: to,\n\t\tcustom: custom\n\t};\n};\n\nexports.default = updateTransition;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _utils = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(0);\n\nvar getAnimationPromises = function getAnimationPromises() {\n\tvar promises = [];\n\tvar animatedElements = (0, _utils.queryAll)(this.options.animationSelector);\n\tanimatedElements.forEach(function (element) {\n\t\tvar promise = new Promise(function (resolve) {\n\t\t\telement.addEventListener((0, _helpers.transitionEnd)(), function (event) {\n\t\t\t\tif (element == event.target) {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tpromises.push(promise);\n\t});\n\treturn promises;\n};\n\nexports.default = getAnimationPromises;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _helpers = __webpack_require__(0);\n\nvar getPageData = function getPageData(request) {\n\t// this method can be replaced in case other content than html is expected to be received from server\n\t// this function should always return {title, pageClass, originalContent, blocks, responseURL}\n\t// in case page has invalid structure - return null\n\tvar html = request.responseText;\n\tvar pageObject = (0, _helpers.getDataFromHtml)(html, this.options.containers);\n\n\tif (pageObject) {\n\t\tpageObject.responseURL = request.responseURL ? request.responseURL : window.location.href;\n\t} else {\n\t\tconsole.warn('Received page is invalid.');\n\t\treturn null;\n\t}\n\n\treturn pageObject;\n};\n\nexports.default = getPageData;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar use = exports.use = function use(plugin) {\n\tif (!plugin.isSwupPlugin) {\n\t\tconsole.warn('Not swup plugin instance ' + plugin + '.');\n\t\treturn;\n\t}\n\n\tthis.plugins.push(plugin);\n\tplugin.swup = this;\n\tif (typeof plugin._beforeMount === 'function') {\n\t\tplugin._beforeMount();\n\t}\n\tplugin.mount();\n\n\treturn this.plugins;\n};\n\nvar unuse = exports.unuse = function unuse(plugin) {\n\tvar pluginReference = void 0;\n\n\tif (typeof plugin === 'string') {\n\t\tpluginReference = this.plugins.find(function (p) {\n\t\t\treturn plugin === p.name;\n\t\t});\n\t} else {\n\t\tpluginReference = plugin;\n\t}\n\n\tif (!pluginReference) {\n\t\tconsole.warn('No such plugin.');\n\t\treturn;\n\t}\n\n\tpluginReference.unmount();\n\n\tif (typeof pluginReference._afterUnmount === 'function') {\n\t\tpluginReference._afterUnmount();\n\t}\n\n\tvar index = this.plugins.indexOf(pluginReference);\n\tthis.plugins.splice(index, 1);\n\n\treturn this.plugins;\n};\n\nvar findPlugin = exports.findPlugin = function findPlugin(pluginName) {\n\treturn this.plugins.find(function (p) {\n\t\treturn pluginName === p.name;\n\t});\n};\n\n/***/ })\n/******/ ]);\n});"],"names":["root","factory","exports","module","define","amd","window","modules","__webpack_require__","_index","_index2","obj","__esModule","default","Object","defineProperty","value","_extends","assign","target","i","arguments","length","key","source","prototype","hasOwnProperty","call","_createClass","Constructor","protoProps","staticProps","defineProperties","props","descriptor","enumerable","configurable","writable","_plugin","_plugin2","arrayify","list","Array","slice","ScriptsPlugin","_Plugin","_inherits","subClass","superClass","TypeError","options","this","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","name","runScripts","scope","head","body","document","scripts","querySelectorAll","forEach","script","runScript","swup","log","originalElement","element","createElement","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","attributes","Symbol","iterator","next","done","_ref2","setAttribute","err","return","textContent","replaceWith","create","constructor","setPrototypeOf","on","off","Plugin","isSwupPlugin","installedModules","m","c","d","getter","o","get","r","toStringTag","t","mode","ns","bind","n","object","property","p","s","moduleId","l","HeadPlugin","instance","_len","args","_key","_temp","_ref","apply","concat","getHeadAndReplace","headChildren","getHeadChildren","nextHeadChildren","getNextHeadChildren","replaceTags","children","pageContent","cache","getCurrentPage","originalContent","replace","innerHTML","querySelector","oldTags","newTags","themeActive","Boolean","addTags","getTagsToAdd","removeTags","getTagsToRemove","reverse","item","removeChild","tag","insertBefore","index","compareTags","oldTag","newTag","outerHTML","foundAt","j","getAttribute","push","Link","markSwupElements","getCurrentUrl","transitionEnd","fetch","getDataFromHtml","createHistoryRecord","classify","_classify2","_interopRequireDefault","_createHistoryRecord2","_getDataFromHtml2","_fetch2","_transitionEnd2","_getCurrentUrl2","_markSwupElements2","_Link2","query","selector","context","queryAll","_delegate2","_Cache2","_loadPage2","_renderPage2","_triggerEvent2","_on2","_off2","_updateTransition2","_getAnimationPromises2","_getPageData2","_plugins","_utils","_helpers","Swup","page","Promise","delegatedListeners","click","linkSelector","linkClickHandler","addEventListener","popStateHandler","documentElement","containers","url","responseURL","cacheUrl","plugins","plugin","use","history","replaceState","state","location","href","random","Math","title","triggerEvent","classList","add","console","warn","_this2","destroy","mouseover","removeEventListener","empty","unuse","removeAttribute","remove","event","link","metaKey","ctrlKey","shiftKey","altKey","button","preventDefault","delegateTarget","getAddress","getHash","scrollToElement","customTransition","loadPage","skipPopStateHandling","pathname","setOptions","defaults","animateHistoryBrowsing","animationSelector","origin","requestHeaders","X-Requested-With","Accept","_handlers","animationInDone","animationInStart","animationOutDone","animationOutStart","animationSkipped","clickLink","contentReplaced","disabled","enabled","openPageInNewTab","pageLoaded","pageRetrievedFromCache","pageView","popState","samePage","samePageWithHash","serverError","transitionStart","willReplaceContent","preloadPromise","transition","renderPage","updateTransition","getAnimationPromises","getPageData","findPlugin","enable","closest","type","callback","useCapture","listenerFn","e","proto","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","nodeType","parentNode","Cache","pages","last","keys","getPage","search","data","popstate","animationPromises","xhrPromise","all","then","exists","resolve","route","reject","headers","response","status","catch","errorUrl","go","text","output","toString","toLowerCase","splice","pushState","split","hostname","getElementsByTagName","innerText","_typeof","html","content","fakeDom","blocks","_ret","v","_loop","json","pageClass","className","method","request","XMLHttpRequest","onreadystatechange","readyState","open","setRequestHeader","send","el","transEndEventNames","WebkitTransition","MozTransition","OTransition","style","elementOrUrl","SVGElement","path","hash","getPath","setTimeout","classItem","RegExp","test","eventName","originalEvent","handler","error","CustomEvent","detail","dispatchEvent","filter","savedHandler","toRemove","indexOf","from","to","custom","promises","promise","responseText","pageObject","_beforeMount","mount","pluginReference","find","unmount","_afterUnmount","pluginName"],"mappings":"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"}