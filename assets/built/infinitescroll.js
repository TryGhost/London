function initInfiniteScroll(n,t){var d,v,r,i,o,l,s,c=t.querySelector("link[rel=next]");function f(){if(404===this.status)return n.removeEventListener("scroll",u),void n.removeEventListener("resize",m);this.response.querySelectorAll(".post-card").forEach(function(e){d.appendChild(e)});var e=this.response.querySelector("link[rel=next]");e?c.href=e.href:(n.removeEventListener("scroll",u),n.removeEventListener("resize",m)),s=t.documentElement.scrollHeight,i=r=!1}function a(){var e;i||(o+l<=s-v?r=!1:(i=!0,(e=new n.XMLHttpRequest).responseType="document",e.addEventListener("load",f),e.open("GET",c.href),e.send(null)))}function e(){r||n.requestAnimationFrame(a),r=!0}function u(){o=n.scrollY,e()}function m(){l=n.innerHeight,s=t.documentElement.scrollHeight,e()}!c||(d=t.querySelector(".post-feed"))&&(i=r=!(v=300),o=n.scrollY,l=n.innerHeight,s=t.documentElement.scrollHeight,n.addEventListener("scroll",u,{passive:!0}),n.addEventListener("resize",m),e())}initInfiniteScroll(window,document);
//# sourceMappingURL=infinitescroll.js.map